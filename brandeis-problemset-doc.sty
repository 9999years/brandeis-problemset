\usepackage{hypdoc}
\usepackage[
	loadHyperref=false,
	createIndexEntries=false
]{doctools}

\PageIndex

\usepackage{textcomp} % needed for listings
\usepackage{xparse}
\usepackage{hologo} % xetex, etc. logos
\usepackage{xkeyval}
\usepackage{cprotect}

\newcommand{\email}[1]{\href{mailto:#1}{\texttt{#1}}}
\newcommand{\https}[1]{\href{https://#1}{\texttt{#1}}}
\newcommand{\bps}{\ltxclass{brandeis-problemset}}
\newcommand{\cosi}[1]{\textsc{cosi}~#1}
\newcommand{\todo}[1]{\begin{itemize}\item[\textbf{To-do:}] #1 \end{itemize}}
\newcommand{\note}[1]{\begin{itemize}\item[\textbf{Note:}] #1 \end{itemize}}
\newcommand{\ctan}[1]{\href{https://ctan.org/pkg/#1}{\package{#1}}}
\NewExpandableDocumentCommand{\Th}{O{l} m}
	{\multicolumn{1}{#1}{\textbf{#2}}}
\newcommand{\fontspecok}{\hologo{XeLaTeX} or \hologo{LuaTeX}}
\newcommand{\ext}[1]{\texttt{.#1}}
\newcommand{\filename}[1]{\texttt{#1}}

% definition copied from doc package \DescribeMacro
\lstnewenvironment{latexfile}[1]
	{\lstset{style=lstDemoStyleLaTeXCode}%
	}
	{}

\define@cmdkeys{version}{author, version, date, changes}
\define@key{version}{v}{\def\cmdKV@version@version{#1}}
\NewDocumentEnvironment{changelog}{o}
	{\section{Changelog}
	\IfValueT{#1}{\setkeys{version}{#1}}%
	\NewDocumentEnvironment{version}{m}
		{\shortversion{##1}%
		\begin{itemize}
			\NewDocumentCommand{\added}{}{\item Added\ }
			\NewDocumentCommand{\removed}{}{\item Removed\ }
			\NewDocumentCommand{\fixed}{}{\item Fixed\ }
		}
		{\end{itemize}}
	\NewDocumentCommand{\shortversion}{m}{
		\setkeys{version}{##1}
		\@ifundefined{cmdKV@version@version}{
			\@ifundefined{cmdKV@version@date}{
				\PackageError{brandeis-problemset-doc}{Either
					version number or date mandatory in
					version environment}{}
			}{%
				\let\cmdKV@version@version\cmdKV@version@date
				\let\cmdKV@version@date\undefined
			}%
		}{}
		\item[\cmdKV@version@version]
			\@ifundefined{cmdKV@version@author}{}{\cmdKV@version@author}
			\@ifundefined{cmdKV@version@date}{%
				% if both undefined, add a linebreak
				\@ifundefined{cmdKV@version@author}{\hspace{0pt}}{}%
			}{(\cmdKV@version@date)}%
			\@ifundefined{cmdKV@version@changes}{}{ --- \cmdKV@version@changes}
			}
	\begin{description}}
	{\end{description}}
